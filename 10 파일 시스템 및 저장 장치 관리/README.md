# 칼리 리눅스 실습 10

## 파일 시스템
 - 윈도우와 달리 리눅스는 드라이브에 대한 물리적 표현(:C등등)이 없고 최상위 루트에 /가 있는 트리 구조다.
 - mount : 운영체제에 엑세스할 수 있도록 드라이브나 디스크를 파일 시스템에 연결하는 것을 의미한다.
 - 해커는 일반적으로 외부 미디어를 사용해 데이터,해킹 도구, OS까지도 로딩한다.
 - 대상 시스템에 드라이브를 마운트하는법, 자신의 시스템으로 저장할 수 있는지, 저장시키는 위치에 대해 알아야한다.

## 장치 디렉터리 /dev
 - /dev : 각각의 연결된 장치를 나타내는 파일을 포함한 특수 디렉터리다.
 - /dev의 역할 : 시스템에서 각 장치를 파일처럼 다룰 수 있게 해 주어 장치와의 상호작용을 표준화한다.
   하드웨어 장치를 직접 제어하지 않고도 응용 프로그램에서 장치에 접근하고 데이터를 전송할 수 있게 도와준다.
   즉, /dev는 하드웨어 장치와의 상호작용을 소프트웨어적으로 처리하는 중요한 역할을 한다.
 - cd /dev,ls -l을 하면 목록을 볼 수 있다. 그 중 해당 파티션 USB 플래시 드라이브 및 파티션 장치 sda1,sda2,sda3,sdb가 특히 중요하다.
 - 리눅스는 파일 시스템에 마운트된 드라이브에 대해 논리적 레이블을 사용한다. 동일한 하드 디스크 드라이브는 마운트된 위치 및 시기에 따라 다른 레이블을 가질 수 있다.
 - 시스템에 2개 이상의 SATA 하드 디스크 드라이브가 있으면 sda,sdb등등 sd뒤에 알파벳을 붙여 순서(major number)를 나타낸다.
 - 정보를 관리하고 분리하기 위해 파티션으로 분할도 가능하다. sda1,sda2처럼 숫자(minor number)로 각 파티션에 레이블을 정한다.
 - 즉, sda라는 하드 디스크 드라이브 안에 파티션을 구성해 sda1,sda2,sda3처럼 나누는 것이다.
 - fdisk -l로 드라이브의 모든 파티션과 사용 가능한 용량 확인이 가능하다. -> 드라이브가 어떤 종류의 시스템으로 포맷되어있는지 확인할 수 있다.
 ```
 Disk /dev/sda: 500GB ->500GB 총 용량 쓸 수 있음.
Sector size (logical/physical): 512 bytes / 512 bytes -> 한 섹터(블록)에 512byte.
Disk model: ST500DM008-2SB10 -> 모델명
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: gpt
Disk identifier: A2D40E7F-BD0C-4E7C-8D2D-D9A76A01230F -> 디스크 고유식별자

Device        Start       End   Sectors   Size Type ->파티션들 목록. 각각 디바이스 레이블,시작섹터,끝섹터,섹터개수,용량,타입
/dev/sda1      2048   1026047   1024000   500M EFI System
/dev/sda2   1026048   1048575      22528    11M Microsoft reserved
/dev/sda3   1048576 499711487 498662912  237.3G Linux filesystem
/dev/sda4  499711488 500118191     406704  199.5M Linux swap
이 중 타입은 여러개가 있다.
1. EFI System: UEFI 부팅을 위한 파티션입니다.
2. Microsoft reserved: Windows 시스템에서 사용되는 예약된 공간입니다.
3. Linux filesystem: 리눅스 시스템에서 사용하는 파일 시스템이 포함된 파티션입니다.
4. Linux swap: 리눅스 시스템의 스왑 공간입니다. 물리적인 메모리(RAM)가 부족할 때 사용하는 가상 메모리 공간입니다.
 ```
 - 최근 윈도우는 NTFS를 사용하지만 예전에는 FAT을 사용했었다.
 - /dev의 첫번째 위치에 c 또는 b가 있다. crw-r--r--처럼 보인다.
 - 이 문자는 장치가 데이터를 송수신하는 두 가지 방법을 말한다.
 - c는 character로 문자 장치다. (마우스나 키보드와 같이 문자 단위로 데이터를 송수신하여 시스템과 상호작용)
 - b는 블록 장치다. 데이터 블록(여러 바이트)로 통신하고 하드 디스크 드라이브,DVD 드라이브같은 장치가 이에 속한다.
 - lsblk(list block)으로 /dev에 나열된 각 블록 장치에 대한 몇가지 기본 정보를 나열한다. (브랜치로 각 장치의 파티션을 표시)
 ``` 이름,식별자(주번호,부번호),RM(이동식 디스크인지,고정인지),사이즈,readonly(1이 읽기 전용),타입(디스크,파티션),마운트어디에 됐는지
 NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0   500G  0 disk 
├─sda1   8:1    0   500M  0 part /boot/efi
├─sda2   8:2    0    1G   0 part [SWAP]
└─sda3   8:3    0  498.5G 0 part /
 ```

## 마운트 및 마운트 해제
 - 최신 운영체제는 저장장치가 연결되면 자동으로 마운트 해준다. 리눅스를 처음 사용할 때는 낯선 주제이기도 하다.
 - 데이터를 사용하려면 물리적 연결 -> 논리적 연결을 해야한다.
 - 리눅스의 마운트 지점은 /mnt,/media다. /mnt에 수동으로 USB장치를 마운트할 수 있지만, 자동으로 마운트되면 /media 디렉터리가 사용된다.
 - mount /dev/sdb1 /mnt -> mnt 디렉터리에 새 하드 디스크 드라이브 sdb1을 마운트 한다.
 - 부팅 시 마운트되는 시스템의 파일 시스템은 /etc/fstab에 있는 파일에 보관되며, 부팅할 때마다 시스템에서 읽는다.
 - umount /dev/sdb1 -> umount 명령어로 현재 세션에서 마운트를 해제한다. 또 사용중인 장치는 마운트 해제가 안된다.

## 파일 시스템 모니터링
 - 파일 시스템의 상태를 모니터링하기 위한 명령들이 있다. (오류 확인,수정)
 - df(disk free) : 사용중인 공간 및 사용 가능한 공간에 대한 정보를 포함하여 CD,DVD 및 플래시 드라이브와 같은 장착된 장치 또는 하드 디스크에 대한 기본 정보를 제공한다.
 - 출력의 첫번째 줄은 카테고리 헤더를, 그 다음에 정보를 표시한다. 디스크 공간은 1KB 블록으로 제공된다. 몇%사용했는지, 총 용량,마운트 정보에 대해 제공한다.
 - fsck(filesystem check) : 오류 확인용이다. 손상을 복구하거나 불량 영역을 불량 블록 테이블에 넣어 불량한 상태임을 표시한다.
 - 검사 전에 파일 시스템 마운트를 풀어주지 않으면 오류가 난다. umount /dev/sdb1 -> fsck -p /dev/sdb1 (-p는 복구 옵션)로 불량 섹터,여러 문제를 확인하고 자동 복구시킨다.